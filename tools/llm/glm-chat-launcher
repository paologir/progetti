#!/bin/bash

# Launcher script for GLM Chat CLI with automatic virtual environment activation

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
VENV_DIR="$SCRIPT_DIR/.venv-glm"
GLM_CHAT="$SCRIPT_DIR/glm-chat"

# Check if virtual environment exists
if [ ! -d "$VENV_DIR" ]; then
    echo "⚠️  Virtual environment not found!"
    echo "Please run: $SCRIPT_DIR/setup-glm-chat.sh"
    exit 1
fi

# Check if glm-chat script exists
if [ ! -f "$GLM_CHAT" ]; then
    echo "❌ GLM Chat script not found at: $GLM_CHAT"
    exit 1
fi

# Run GLM Chat with the virtual environment Python
exec "$VENV_DIR/bin/python" "$GLM_CHAT" "$@"